language: python
python_version: "3.11.7"
tools:
  - name: pytest
    version: "7.4.3"
  - name: pytest-html
    version: "4.1.1"
  - name: ruff
    version: "0.1.9"
  - name: mypy
    version: "1.14.1"
  - name: isort
    version: "5.13.2"
  - name: black
    version: "23.12.1"

artifacts:
  - file: "pytest-results.json"
    type: pytest-json
    format: json
    description: "Pytest JSON: 5 pass, 2 fail, 1 skip"
    coverage_target: "validators/pytest-validator.ts"

  - file: "pytest-report.html"
    type: pytest-html
    format: html
    description: "Pytest HTML report with test details"
    coverage_target: "parsers/html/pytest-html.ts"

  - file: "ruff-output.txt"
    type: ruff-txt
    format: txt
    description: "Ruff linter output with violations"
    coverage_target: "validators/linter-validator.ts"

  - file: "mypy-output.txt"
    type: mypy-txt
    format: txt
    description: "Mypy type checker errors"
    coverage_target: "validators/linter-validator.ts"

  - file: "mypy-results.json"
    type: mypy-ndjson
    format: json
    description: "Mypy NDJSON: type checking errors in newline-delimited JSON format"
    coverage_target: "validators/mypy-validator.ts"

  - file: "isort-output.txt"
    type: isort-txt
    format: txt
    description: "Isort import sorting report with unsorted imports"
    coverage_target: "validators/isort-validator.ts"

  - file: "black-output.txt"
    type: black-txt
    format: txt
    description: "Black code formatter diff output with formatting violations"
    coverage_target: "validators/black-validator.ts"

commands:
  generate: "docker-compose up --build"
  clean: "docker-compose down -v && rm -rf ../../generated/python"
