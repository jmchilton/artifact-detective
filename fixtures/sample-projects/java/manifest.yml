language: java
java_version: "21"

tools:
  - name: maven
    version: "3.9.6"
  - name: junit
    version: "4.13.2"
  - name: checkstyle
    version: "10.12.5"
  - name: maven-checkstyle-plugin
    version: "3.4.0"
  - name: maven-surefire-report-plugin
    version: "3.0.0"
  - name: spotbugs
    version: "4.7.3"

artifacts:
  - file: "TEST-com.example.CalculatorTest.xml"
    type: junit-xml
    format: xml
    description: "JUnit test results: 6 passed, 1 failed, 1 skipped"
    coverage_target: ""

  - file: "surefire-report.html"
    type: surefire-html
    format: html
    description: "Maven surefire aggregated test report in HTML format"
    coverage_target: ""

  - file: "checkstyle-result.xml"
    type: checkstyle-xml
    format: xml
    description: "Checkstyle XML report with linting violations"
    coverage_target: ""

  - file: "checkstyle-result.sarif"
    type: checkstyle-sarif-json
    format: json
    description: "Checkstyle SARIF JSON report with linting violations in standardized format"
    coverage_target: ""

  - file: "spotbugs-report.txt"
    type: spotbugs-txt
    format: txt
    description: "SpotBugs analysis (potential null pointer, division by zero)"
    coverage_target: ""

commands:
  generate: "docker-compose up --build --abort-on-container-exit"
  clean: "docker-compose down -v && rm -rf ../../generated/java"
