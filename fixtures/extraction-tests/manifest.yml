extraction-tests:
  - artifact-type: eslint-txt
    description: "ESLint output from Galaxy project client unit tests - 451 problems (2 errors, 449 warnings)"
    log-file: "eslint-txt/logs.txt"
    include:
      # File path that contains errors
      - string: "VisualizationFrame.vue"
      # Specific error line and column numbers
      - string: "105:9"
      - string: "106:9"
      # Rule name
      - string: "vue/attributes-order"
      # Error message content
      - string: "should go before"
      # Pattern for component file names
      - string: ".vue"
      # Summary line with error count
      - string: "✖ 451 problems"
      - string: "2 errors"
    exclude:
      # Timestamps should be removed from extracted output
      - regex: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}'
      # GitHub Actions markers should be removed
      - string: "##["
      # CI runner info should not appear
      - string: "Current runner version"
      - string: "Runner Image"
      - string: "GITHUB_TOKEN Permissions"
      # npm notice/warnings from CI logs should not be in extraction
      - string: "npm notice"
      - string: "npm warn"

  - artifact-type: eslint-txt
    description: "ESLint output from Galaxy project via script wrapper - same output as direct eslint but invoked via bash script"
    log-file: "eslint-script-txt/logs.txt"
    # Custom extraction markers for script-wrapped linter
    extraction:
      startMarker: 'bash \.ci/jslint\.sh'
      endMarker: '^\d+ problems?'
      includeEndMarker: true
    include:
      # File path that contains errors
      - string: "VisualizationFrame.vue"
      # Specific error line and column numbers
      - string: "105:9"
      - string: "106:9"
      # Rule name
      - string: "vue/attributes-order"
      # Error message content
      - string: "should go before"
      # Pattern for component file names
      - string: ".vue"
      # Summary line with error count
      - string: "✖ 451 problems"
      - string: "2 errors"
    exclude:
      # Timestamps should be removed from extracted output
      - regex: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}'
      # GitHub Actions markers should be removed
      - string: "##["
      # CI runner info should not appear
      - string: "Current runner version"
      - string: "Runner Image"
      - string: "GITHUB_TOKEN Permissions"

  - artifact-type: jest-txt
    description: "Jest text output from a Galaxy build"
    log-file: "jest-txt/logs.txt"
    include:
      # Test result markers - these definitely appear in every test run
      - string: "PASS"
      - string: "FAIL"
      # Test file extensions - present in many test files
      - string: ".test.ts"
      - string: ".test.js"
      # Summary section header
      - string: "Summary of all failing tests"
      # Test counts summary
      - string: "Test Suites:"
    exclude:
      # Timestamps should be removed from output
      - regex: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}'
      # GitHub Actions markers should be removed
      - string: "##["

  - artifact-type: ruff-txt
    description: "Ruff Python linter output with code quality violations"
    log-file: "ruff-txt/logs.txt"
    include:
      # Error line pattern: file:line:col: CODE message
      - regex: '^[a-z]+/[a-z_]+\.py:\d+:\d+:'
      # Error codes (F = PyFlakes, E = Error, etc)
      - string: "F401"
      - string: "F841"
      # Help text
      - string: "help:"
      # Summary line
      - string: "Found 2 errors"
    exclude:
      # Timestamps should be cleaned from extracted output (CI log markers)
      - regex: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z'
      # GitHub Actions markers should be removed
      - string: "##["
      # CI runner info should not appear
      - string: "Current runner version"
      - string: "Runner Image"
      # Other tool commands should not appear in extracted ruff output
      - string: "+ mypy"
      - string: "apt-get"
